<div class="tree">

  <script type="text/ng-template" id="tree_children_renderer.html">

    <div ui-tree-handle>
      <tree-item
          item="item"
          type="'category'"></tree-item>
    </div>

    <div ui-tree-nodes="treeOptions"
         ng-model="item.categories"
         ng-class="{hidden: collapsed}">
      <div class="tree-row">
        <div ng-repeat="item in item.categories"
             ui-tree-node
             ng-include="'tree_children_renderer.html'"
             data-collapsed="!item.expanded">
        </div>
      </div>
    </div>

  </script>

  <div ui-tree="$ctrl.treeOptions"
       id="admin-tree-root"
       data-empty-placeholder-enabled="false"
       data-nodrop-enabled="false"
       data-drag-enabled="false">
    <div ui-tree-nodes
         ng-model="$ctrl.categories.categories">
      <div ng-repeat="item in $ctrl.categories.categories | filter:{name: $ctrl.search}"
           ui-tree-node
           ng-include="'tree_children_renderer.html'"
           data-collapsed="!item.expanded">
      </div>

      <div ng-repeat="article in $ctrl.categories.articles | filter:{question: $ctrl.search}">

        <div>
          <tree-item
              item="article"
              type="'faq'">
          </tree-item>
        </div>

      </div>

    </div>
  </div>

</div>
